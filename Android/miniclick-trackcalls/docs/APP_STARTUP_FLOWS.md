# ğŸ“± MiniClick Call Track - App Startup Flows
*Version 1.2 | Updated: Jan 2026*

This document details the startup process and check flows for different user states.

---

## ğŸ”„ User State Decision Tree

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              APP LAUNCH                                          â”‚
â”‚                         CallTrackerApplication                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              BACKGROUND INITIALIZATION                 â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚ 1. Schedule CallSyncWorker (every 30 min)       â”‚  â”‚
        â”‚  â”‚ 2. Schedule RecordingUploadWorker (every 30min) â”‚  â”‚
        â”‚  â”‚ 3. Start SyncService (foreground)               â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           MainActivity.onCreate()                                â”‚
â”‚                                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚   â”‚ Install      â”‚    â”‚ Init         â”‚    â”‚ Handle       â”‚                      â”‚
â”‚   â”‚ SplashScreen â”‚â”€â”€â”€â–¶â”‚ ViewModels   â”‚â”€â”€â”€â–¶â”‚ Intent       â”‚                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  CHECK: isAgreementAccepted?  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
                    â–¼                               â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   NO    â”‚                     â”‚   YES   â”‚
              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                   â”‚                               â”‚
                   â–¼                               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ AGREEMENT SCREEN â”‚       â”‚ CHECK: isOnboardingCompleted? â”‚
        â”‚  (Terms & Policy)â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
                 â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ Accept            â”‚                           â”‚
                 â–¼                   â–¼                           â–¼
        [Returns to check]     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚   NO    â”‚                 â”‚   YES   â”‚
                               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                                    â”‚                           â”‚
                                    â–¼                           â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ ONBOARDING FLOW  â”‚         â”‚   MAIN SCREEN    â”‚
                          â”‚ (7-step wizard)  â”‚         â”‚   (Full App)     â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚                            â”‚
                                   â”‚ Complete                   â”‚
                                   â–¼                            â–¼
                          [Returns to check]           [Setup Guide OR Data]
```

---

## ğŸ‘¤ Scenario 1: FRESH INSTALL (Non-Setup User)

**State**: First launch, nothing configured

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ†• FRESH INSTALL USER                                    â”‚
â”‚                                                                                  â”‚
â”‚  Stored Values:                                                                  â”‚
â”‚  â”œâ”€â”€ isAgreementAccepted = FALSE                                                â”‚
â”‚  â”œâ”€â”€ isOnboardingCompleted = FALSE                                              â”‚
â”‚  â”œâ”€â”€ pairingCode = ""                                                           â”‚
â”‚  â”œâ”€â”€ trackStartDate = 0                                                         â”‚
â”‚  â”œâ”€â”€ simSelection = "Off"                                                       â”‚
â”‚  â””â”€â”€ All permissions = NOT GRANTED                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          FLOW SEQUENCE                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ STEP 1: AGREEMENT SCREEN                                                 â”‚    â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                            â”‚    â”‚
â”‚  â”‚ â”œâ”€â”€ Show Terms of Service                                                â”‚    â”‚
â”‚  â”‚ â”œâ”€â”€ Show Privacy Policy                                                  â”‚    â”‚
â”‚  â”‚ â””â”€â”€ [Accept] button                                                      â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚     User Action: Accept â†’ setAgreementAccepted(true)                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                            â”‚
â”‚                                    â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ STEP 2: ONBOARDING SLIDESHOW (8 Steps)                                   â”‚    â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                 â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  Page 1: Welcome                    Page 5: Notes During Calls           â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ "Welcome to MiniClick"         â”œâ”€â”€ "See notes while on call"        â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ [Get Started]                  â””â”€â”€ [Next]                           â”‚    â”‚
â”‚  â”‚  â””â”€â”€ [Login] â†’ Cloud Sync Modal                                          â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  Page 2: Organize Calls             Page 6: Sync to Cloud                â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ "Add notes and labels"         â”œâ”€â”€ "Access from any device"         â”‚    â”‚
â”‚  â”‚  â””â”€â”€ [Next]                         â””â”€â”€ [Next]                           â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  Page 3: Advanced Filtering         Page 7: Privacy Disclosure           â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ "Find calls with filters"      â”œâ”€â”€ Lists required permissions:      â”‚    â”‚
â”‚  â”‚  â””â”€â”€ [Next]                         â”‚   â€¢ Call Logs                      â”‚    â”‚
â”‚  â”‚                                     â”‚   â€¢ Contacts                        â”‚    â”‚
â”‚  â”‚  Page 4: Attach Recordings          â”‚   â€¢ Phone State                     â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ "Keep recordings organized"    â”‚   â€¢ Make Calls                      â”‚    â”‚
â”‚  â”‚  â””â”€â”€ [Next]                         â”‚   â€¢ Storage                         â”‚    â”‚
â”‚  â”‚                                     â””â”€â”€ [Finish Setup]                    â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚     User Action: Finish â†’ setOnboardingCompleted(true)                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                            â”‚
â”‚                                    â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ STEP 3: MAIN SCREEN WITH SETUP GUIDE                                     â”‚    â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                 â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Setup Guide Steps (shown sequentially) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚                                                                     â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  1. CALL_LOG Permission                                            â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€â”€ Check: READ_CALL_LOG                                       â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€â”€ [Allow Access] â†’ Request permission                        â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â””â”€â”€ On Grant: Start SyncService, proceed to next               â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                                     â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  2. CONTACTS Permission                                            â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€â”€ Check: READ_CONTACTS                                       â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â””â”€â”€ [Allow Access] â†’ Request permission                        â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                                     â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  3. PHONE_STATE Permission                                         â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€â”€ Check: READ_PHONE_STATE + READ_PHONE_NUMBERS               â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â””â”€â”€ [Allow Access] â†’ Request permissions                       â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                                     â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  4. NOTIFICATIONS Permission (Android 13+)                         â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€â”€ Check: POST_NOTIFICATIONS                                  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€â”€ [Allow] â†’ Request permission                               â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â””â”€â”€ [Skip] â†’ Mark as skipped                                   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                                     â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  5. START_DATE Configuration                                       â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€â”€ Check: trackStartDate != 0                                 â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€â”€ [Set Date] â†’ Date picker                                   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â””â”€â”€ [Skip] â†’ Use all available data                            â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                                     â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  6. SIM_SELECTION Configuration                                    â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€â”€ Check: simSelection != "Off"                               â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€â”€ [Select SIM] â†’ SIM selection modal                         â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â””â”€â”€ [Skip] â†’ Track both SIMs                                   â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                                     â”‚ â”‚    â”‚
â”‚  â”‚  â”‚  7. RECORDING Permission                                           â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€â”€ Check: READ_MEDIA_AUDIO / READ_EXTERNAL_STORAGE            â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â”œâ”€â”€ [Enable Now] â†’ Enable recording + request permission       â”‚ â”‚    â”‚
â”‚  â”‚  â”‚     â””â”€â”€ [Skip] â†’ Mark userDeclinedRecording = true                 â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                                                                     â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  Auto-trigger: Cloud Sync Modal (if pairingCode empty & not dismissed)  â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¤ Scenario 2: HALF SETUP (Partially Configured User)

**State**: Some permissions granted, some config done, no org connected

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         â³ HALF SETUP USER                                       â”‚
â”‚                                                                                  â”‚
â”‚  Stored Values:                                                                  â”‚
â”‚  â”œâ”€â”€ isAgreementAccepted = TRUE                                                 â”‚
â”‚  â”œâ”€â”€ isOnboardingCompleted = TRUE                                               â”‚
â”‚  â”œâ”€â”€ pairingCode = ""                                                           â”‚
â”‚  â”œâ”€â”€ trackStartDate = 1704067200000 (set)                                       â”‚
â”‚  â”œâ”€â”€ simSelection = "Both"                                                      â”‚
â”‚  â”‚                                                                              â”‚
â”‚  â”‚ Permissions:                                                                  â”‚
â”‚  â”œâ”€â”€ READ_CALL_LOG = âœ… GRANTED                                                 â”‚
â”‚  â”œâ”€â”€ READ_CONTACTS = âŒ NOT GRANTED                                             â”‚
â”‚  â”œâ”€â”€ READ_PHONE_STATE = âœ… GRANTED                                              â”‚
â”‚  â”œâ”€â”€ POST_NOTIFICATIONS = âŒ SKIPPED                                            â”‚
â”‚  â””â”€â”€ READ_MEDIA_AUDIO = âŒ NOT GRANTED                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          FLOW SEQUENCE                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ STEP 1: SKIP AGREEMENT (already accepted)                                â”‚    â”‚
â”‚  â”‚         isAgreementAccepted = TRUE â†’ âœ… Skip                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                            â”‚
â”‚                                    â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ STEP 2: SKIP ONBOARDING (already completed)                              â”‚    â”‚
â”‚  â”‚         isOnboardingCompleted = TRUE â†’ âœ… Skip                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                            â”‚
â”‚                                    â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ STEP 3: MAIN SCREEN                                                      â”‚    â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚    â”‚
â”‚  â”‚  â•‘  HOMEVIEWMODEL INITIALIZATION                                      â•‘  â”‚    â”‚
â”‚  â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚    â”‚
â”‚  â”‚  â•‘  1. refreshSettings()                                              â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”œâ”€â”€ Load simSelection = "Both"                                 â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”œâ”€â”€ Load trackStartDate = 1704067200000                        â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â””â”€â”€ Load isSyncSetup = FALSE (no pairing code)                 â•‘  â”‚    â”‚
â”‚  â”‚  â•‘                                                                    â•‘  â”‚    â”‚
â”‚  â”‚  â•‘  2. loadRecordingPath()                                            â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â””â”€â”€ Get recording directory                                    â•‘  â”‚    â”‚
â”‚  â”‚  â•‘                                                                    â•‘  â”‚    â”‚
â”‚  â”‚  â•‘  3. loadPersistentState()                                          â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â””â”€â”€ Restore filters, search, view states                       â•‘  â”‚    â”‚
â”‚  â”‚  â•‘                                                                    â•‘  â”‚    â”‚
â”‚  â”‚  â•‘  4. syncFromSystem() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚                                                              â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â–¼                                                              â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚ syncFromSystemCallLog()                                  â”‚   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚                                                          â”‚   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚ UI: "Importing Data from System..."                      â”‚   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚                                                          â”‚   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚ â€¢ Check simSelection = "Both" âœ…                         â”‚   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚ â€¢ Get filterDate = trackStartDate                        â”‚   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚ â€¢ Query system CallLog.Calls                             â”‚   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚ â€¢ Filter by SIM (both included)                          â”‚   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚ â€¢ Insert new calls to Room                               â”‚   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚                                                          â”‚   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚ UI: "Finding Recordings of Calls" (0% â†’ 100%)            â”‚   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚                                                          â”‚   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚ âš ï¸ Recording find SKIPPED (no storage permission)        â”‚   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚                                                          â”‚   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚ â€¢ Update person data                                     â”‚   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”‚ â€¢ Cleanup old calls                                      â”‚   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘  â”‚    â”‚
â”‚  â”‚  â•‘                                                                    â•‘  â”‚    â”‚
â”‚  â”‚  â•‘  5. Start Flow Observers                                           â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”œâ”€â”€ Observe callLogs from Room                                 â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”œâ”€â”€ Observe persons from Room                                  â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â”œâ”€â”€ Observe pending sync counts = 0 (not connected)            â•‘  â”‚    â”‚
â”‚  â”‚  â•‘     â””â”€â”€ Observe network status                                     â•‘  â”‚    â”‚
â”‚  â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Remaining Setup Steps â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚  â”‚                                                                   â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  âŒ CONTACTS Permission    â†’ Show step with [Allow Access]        â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  â­ï¸ NOTIFICATIONS Skipped  â†’ Hidden                               â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  âœ… START_DATE Done        â†’ Hidden                               â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  âœ… SIM_SELECTION Done     â†’ Hidden                               â”‚   â”‚    â”‚
â”‚  â”‚  â”‚  âŒ RECORDING Permission   â†’ Show step with [Enable Now]          â”‚   â”‚    â”‚
â”‚  â”‚  â”‚                                                                   â”‚   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  Auto-trigger: Cloud Sync Modal (no pairing code detected)               â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¤ Scenario 3: FULL SETUP - LOCAL ONLY

**State**: All permissions granted, all config done, NO org connection

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      âœ… FULL SETUP - LOCAL ONLY                                  â”‚
â”‚                                                                                  â”‚
â”‚  Stored Values:                                                                  â”‚
â”‚  â”œâ”€â”€ isAgreementAccepted = TRUE                                                 â”‚
â”‚  â”œâ”€â”€ isOnboardingCompleted = TRUE                                               â”‚
â”‚  â”œâ”€â”€ isOnboardingOffline = TRUE  â† User chose "Keep Offline"                    â”‚
â”‚  â”œâ”€â”€ pairingCode = ""                                                           â”‚
â”‚  â”œâ”€â”€ organisationId = ""                                                        â”‚
â”‚  â”œâ”€â”€ userId = ""                                                                â”‚
â”‚  â”œâ”€â”€ trackStartDate = 1704067200000                                             â”‚
â”‚  â”œâ”€â”€ simSelection = "Both"                                                      â”‚
â”‚  â”‚                                                                              â”‚
â”‚  â”‚ All Permissions: âœ… GRANTED                                                  â”‚
â”‚  â”œâ”€â”€ READ_CALL_LOG = âœ…                                                         â”‚
â”‚  â”œâ”€â”€ READ_CONTACTS = âœ…                                                         â”‚
â”‚  â”œâ”€â”€ READ_PHONE_STATE = âœ…                                                      â”‚
â”‚  â”œâ”€â”€ READ_PHONE_NUMBERS = âœ…                                                    â”‚
â”‚  â”œâ”€â”€ POST_NOTIFICATIONS = âœ…                                                    â”‚
â”‚  â””â”€â”€ READ_MEDIA_AUDIO = âœ…                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          FLOW SEQUENCE                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ STEP 1: SKIP AGREEMENT âœ…                                                â”‚    â”‚
â”‚  â”‚ STEP 2: SKIP ONBOARDING âœ…                                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                            â”‚
â”‚                                    â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ STEP 3: MAIN SCREEN - DIRECT TO DATA                                     â”‚    â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                 â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  SetupGuide Check:                                                       â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ All permissions granted? âœ…                                         â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ trackStartDate set? âœ…                                              â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ simSelection != "Off"? âœ…                                           â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ Recording enabled? âœ…                                               â”‚    â”‚
â”‚  â”‚  â””â”€â”€ All skipped steps accounted? âœ…                                     â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  RESULT: No setup steps remaining â†’ Show contentWhenDone()               â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  Cloud Sync Modal Check:                                                 â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ pairingCode empty? YES                                              â”‚    â”‚
â”‚  â”‚  â”œâ”€â”€ isSessionOnboardingDismissed? YES (isOnboardingOffline = true)      â”‚    â”‚
â”‚  â”‚  â””â”€â”€ RESULT: Don't show modal (user chose offline mode)                  â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                            â”‚
â”‚                                    â–¼                                            â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘                         DATA SYNC FLOW                                     â•‘  â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚  â•‘                                                                            â•‘  â”‚
â”‚  â•‘  HomeViewModel.syncFromSystem()                                            â•‘  â”‚
â”‚  â•‘  â”‚                                                                         â•‘  â”‚
â”‚  â•‘  â–¼                                                                         â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘  â”‚
â”‚  â•‘  â”‚ PHASE 1: Import System Call Log                                      â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                   â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ UI: "Importing Data from System..."                                  â”‚  â•‘  â”‚
â”‚  â•‘  â”‚                                                                      â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ 1. Get filterDate = trackStartDate                                   â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ 2. Get simSelection = "Both"                                         â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ 3. Calculate fetch window (optimize with latest call date)           â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ 4. Query Android CallLog.Calls content provider                      â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ 5. Filter by date + SIM                                              â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ 6. Compare with existing Room data                                   â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ 7. Batch insert new calls                                            â”‚  â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘  â”‚
â”‚  â•‘  â”‚                                                                         â•‘  â”‚
â”‚  â•‘  â–¼                                                                         â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘  â”‚
â”‚  â•‘  â”‚ PHASE 2: Find Recordings                                             â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ UI: "Finding Recordings of Calls" â†’ "50% Done" â†’ "100% Done"         â”‚  â•‘  â”‚
â”‚  â•‘  â”‚                                                                      â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ 1. Get calls missing recordingPath                                   â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ 2. Scan recording directory for files                                â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ 3. Match recordings to calls by:                                     â”‚  â•‘  â”‚
â”‚  â•‘  â”‚    â€¢ Call date (Â±2 minutes)                                          â”‚  â•‘  â”‚
â”‚  â•‘  â”‚    â€¢ Duration match                                                  â”‚  â•‘  â”‚
â”‚  â•‘  â”‚    â€¢ Phone number in filename                                        â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ 4. Batch update recording paths in Room                              â”‚  â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘  â”‚
â”‚  â•‘  â”‚                                                                         â•‘  â”‚
â”‚  â•‘  â–¼                                                                         â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘  â”‚
â”‚  â•‘  â”‚ PHASE 3: Update Person Data                                          â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ 1. Group calls by phoneNumber                                        â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ 2. Calculate aggregates (total calls, duration, etc.)                â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ 3. Preserve existing notes/labels if any                             â”‚  â•‘  â”‚
â”‚  â•‘  â”‚ 4. Upsert person entities                                            â”‚  â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘  â”‚
â”‚  â•‘                                                                            â•‘  â”‚
â”‚  â•‘  â›” SERVER SYNC SKIPPED                                                    â•‘  â”‚
â”‚  â•‘  â”‚                                                                         â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Check: organisationId = "" (empty)                                   â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ Check: userId = "" (empty)                                           â•‘  â”‚
â”‚  â•‘  â””â”€â”€ Result: Skip all network operations                                  â•‘  â”‚
â”‚  â•‘                                                                            â•‘  â”‚
â”‚  â•‘  UI State:                                                                 â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ isSyncSetup = FALSE                                                  â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ pendingNewCallsCount = 0 (not tracked for local)                     â•‘  â”‚
â”‚  â•‘  â”œâ”€â”€ pendingMetadataUpdatesCount = 0                                      â•‘  â”‚
â”‚  â•‘  â””â”€â”€ Sync status bar hidden                                               â•‘  â”‚
â”‚  â•‘                                                                            â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¤ Scenario 4: FULL SETUP - ORG CONNECTED

**State**: All permissions granted, all config done, connected to organization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      âœ… FULL SETUP - ORG CONNECTED                               â”‚
â”‚                                                                                  â”‚
â”‚  Stored Values:                                                                  â”‚
â”‚  â”œâ”€â”€ isAgreementAccepted = TRUE                                                 â”‚
â”‚  â”œâ”€â”€ isOnboardingCompleted = TRUE                                               â”‚
â”‚  â”œâ”€â”€ pairingCode = "ABC123"                                                     â”‚
â”‚  â”œâ”€â”€ organisationId = "org_12345"                                               â”‚
â”‚  â”œâ”€â”€ userId = "user_67890"                                                      â”‚
â”‚  â”œâ”€â”€ deviceId = "android_abcdef"                                                â”‚
â”‚  â”œâ”€â”€ callerPhoneSim1 = "+919876543210"                                          â”‚
â”‚  â”œâ”€â”€ callerPhoneSim2 = "+919876543211"                                          â”‚
â”‚  â”œâ”€â”€ trackStartDate = 1704067200000                                             â”‚
â”‚  â”œâ”€â”€ simSelection = "Both"                                                      â”‚
â”‚  â”œâ”€â”€ callTrackEnabled = TRUE                                                    â”‚
â”‚  â”œâ”€â”€ callRecordEnabled = TRUE                                                   â”‚
â”‚  â”œâ”€â”€ lastSyncTime = 1704200000000                                               â”‚
â”‚  â”‚                                                                              â”‚
â”‚  â”‚ All Permissions: âœ… GRANTED                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          FLOW SEQUENCE                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ STEP 1: SKIP AGREEMENT âœ…                                                â”‚    â”‚
â”‚  â”‚ STEP 2: SKIP ONBOARDING âœ…                                               â”‚    â”‚
â”‚  â”‚ STEP 3: SKIP SETUP GUIDE (all complete) âœ…                               â”‚    â”‚
â”‚  â”‚ STEP 4: SKIP CLOUD SYNC MODAL (already paired) âœ…                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                            â”‚
â”‚                                    â–¼                                            â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚  â•‘                    FULL DATA SYNC FLOW (ORG CONNECTED)                     â•‘  â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚  â•‘                                                                            â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘  â”‚
â”‚  â•‘  â”‚ PHASE 0: LOCAL IMPORT (Same as Local Only)                         â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â€¢ Import system call log                                           â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â€¢ Find recordings                                                  â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â€¢ Update person data                                               â”‚    â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘  â”‚
â”‚  â•‘  â”‚                                                                         â•‘  â”‚
â”‚  â•‘  â–¼                                                                         â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘  â”‚
â”‚  â•‘  â”‚ PHASE 1: FETCH CONFIG FROM SERVER                                  â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                               â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ API: POST /api/calls.php?action=fetch_config                       â”‚    â•‘  â”‚
â”‚  â•‘  â”‚                                                                    â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ Request:                                                           â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ org_id = "org_12345"                                           â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ user_id = "user_67890"                                         â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ os_version = "14"                                              â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ battery_pct = 85                                               â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â””â”€â”€ device_model = "Pixel 8"                                       â”‚    â•‘  â”‚
â”‚  â•‘  â”‚                                                                    â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ Response Updates:                                                  â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ settings:                                                      â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”‚   â”œâ”€â”€ allow_personal_exclusion â†’ settingsRepository             â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”‚   â”œâ”€â”€ allow_changing_tracking_start_date                         â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”‚   â”œâ”€â”€ allow_updating_tracking_sims                               â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”‚   â”œâ”€â”€ call_track (enable/disable tracking)                       â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”‚   â””â”€â”€ call_record_crm (enable/disable recording)                 â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ plan:                                                          â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”‚   â”œâ”€â”€ expiry_date                                                â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”‚   â”œâ”€â”€ allowed_storage_gb                                         â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”‚   â””â”€â”€ storage_used_bytes                                         â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â””â”€â”€ excluded_contacts: ["1234567890", "0987654321"]                â”‚    â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘  â”‚
â”‚  â•‘  â”‚                                                                         â•‘  â”‚
â”‚  â•‘  â–¼                                                                         â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘  â”‚
â”‚  â•‘  â”‚ PHASE 2: PULL SERVER UPDATES (Delta Sync)                          â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ API: POST /api/calls.php?action=fetch_updates                      â”‚    â•‘  â”‚
â”‚  â•‘  â”‚                                                                    â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ Request:                                                           â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ org_id, user_id, device_id                                     â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â””â”€â”€ last_sync_time = 1704200000000                                 â”‚    â•‘  â”‚
â”‚  â•‘  â”‚                                                                    â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ Response Processing:                                               â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ call_updates[ ] â†’ updateCallsFromServerBatch()                 â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”‚   â”œâ”€â”€ Apply reviewed status                                      â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”‚   â”œâ”€â”€ Apply notes                                                â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”‚   â””â”€â”€ Apply caller names                                         â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â””â”€â”€ person_updates[ ] â†’ updatePersonsFromServerBatch()             â”‚    â•‘  â”‚
â”‚  â•‘  â”‚     â”œâ”€â”€ Apply person notes                                         â”‚    â•‘  â”‚
â”‚  â•‘  â”‚     â”œâ”€â”€ Apply labels                                               â”‚    â•‘  â”‚
â”‚  â•‘  â”‚     â”œâ”€â”€ Apply names                                                â”‚    â•‘  â”‚
â”‚  â•‘  â”‚     â””â”€â”€ Apply exclusion status                                     â”‚    â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘  â”‚
â”‚  â•‘  â”‚                                                                         â•‘  â”‚
â”‚  â•‘  â–¼                                                                         â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘  â”‚
â”‚  â•‘  â”‚ PHASE 3: PUSH NEW CALLS (Batch - 100 at a time)                    â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ UI: "Syncing Call Metadata (1/3).."                                â”‚    â•‘  â”‚
â”‚  â•‘  â”‚                                                                    â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ Query: getCallsNeedingMetadataSync()                               â”‚    â•‘  â”‚
â”‚  â•‘  â”‚        WHERE metadataSyncStatus IN (PENDING, FAILED, MODIFIED)     â”‚    â•‘  â”‚
â”‚  â•‘  â”‚                                                                    â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ For each call:                                                     â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ Check: isExcludedFromSync(phoneNumber)?                        â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”‚   â””â”€â”€ YES â†’ markMetadataSynced() + skip                          â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ Check: SIM filter match?                                       â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”‚   â””â”€â”€ NO â†’ skip                                                  â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â””â”€â”€ Add to batch                                                   â”‚    â•‘  â”‚
â”‚  â•‘  â”‚                                                                    â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ API: POST /api/calls.php?action=batch_sync_calls                   â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ Send batch of 100 calls as JSON                                â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â””â”€â”€ On success: markMetadataSynced() for each                      â”‚    â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘  â”‚
â”‚  â•‘  â”‚                                                                         â•‘  â”‚
â”‚  â•‘  â–¼                                                                         â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘  â”‚
â”‚  â•‘  â”‚ PHASE 4: PUSH METADATA UPDATES (One-by-one)                        â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ For calls with metadataSyncStatus = MODIFIED:                      â”‚    â•‘  â”‚
â”‚  â•‘  â”‚                                                                    â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ API: POST /api/calls.php?action=update_call                        â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ unique_id                                                      â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ reviewed                                                       â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ note                                                           â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ caller_name                                                    â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â””â”€â”€ updated_at                                                     â”‚    â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘  â”‚
â”‚  â•‘  â”‚                                                                         â•‘  â”‚
â”‚  â•‘  â–¼                                                                         â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘  â”‚
â”‚  â•‘  â”‚ PHASE 5: PUSH PERSON UPDATES                                       â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ Query: getPendingSyncPersons() WHERE needsSync = 1                 â”‚    â•‘  â”‚
â”‚  â•‘  â”‚                                                                    â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ For each person:                                                   â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ API: POST /api/calls.php?action=update_person                      â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ phone                                                          â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ person_note                                                    â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ label                                                          â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ name                                                           â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â””â”€â”€ updated_at                                                     â”‚    â•‘  â”‚
â”‚  â•‘  â”‚                                                                    â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ On success: updatePersonSyncStatus(phone, false)                   â”‚    â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘  â”‚
â”‚  â•‘  â”‚                                                                         â•‘  â”‚
â”‚  â•‘  â–¼                                                                         â•‘  â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â•‘  â”‚
â”‚  â•‘  â”‚ PHASE 6: TRIGGER RECORDING UPLOAD (If pending)                     â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ Check: getCallsNeedingRecordingSync().size > 0?                    â”‚    â•‘  â”‚
â”‚  â•‘  â”‚                                                                    â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ If YES â†’ RecordingUploadWorker.runNow()                            â”‚    â•‘  â”‚
â”‚  â•‘  â”‚                                                                    â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ RecordingUploadWorker does:                                        â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ Get calls where recordingSyncStatus = PENDING                  â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”‚   AND metadataSyncStatus = SYNCED                                â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ Compress audio file (optional)                                 â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â”œâ”€â”€ Upload in 5MB chunks                                           â”‚    â•‘  â”‚
â”‚  â•‘  â”‚ â””â”€â”€ Update recordingSyncStatus = COMPLETED                         â”‚    â•‘  â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â•‘  â”‚
â”‚  â•‘                                                                            â•‘  â”‚
â”‚  â•‘  Update: lastSyncTime = current timestamp                                  â•‘  â”‚
â”‚  â•‘                                                                            â•‘  â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                  â”‚
â”‚  UI State (Org Connected):                                                       â”‚
â”‚  â”œâ”€â”€ isSyncSetup = TRUE                                                         â”‚
â”‚  â”œâ”€â”€ pendingNewCallsCount = X (shown in sync status bar)                        â”‚
â”‚  â”œâ”€â”€ pendingMetadataUpdatesCount = X                                            â”‚
â”‚  â”œâ”€â”€ pendingPersonUpdatesCount = X                                              â”‚
â”‚  â”œâ”€â”€ pendingRecordingCount = X                                                  â”‚
â”‚  â”œâ”€â”€ Sync status bar VISIBLE with queue icon                                    â”‚
â”‚  â””â”€â”€ Click status bar â†’ SyncQueueModal with all details                         â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”€ Quick Comparison Table

| Check/Process | Fresh Install | Half Setup | Local Only | Org Connected |
|--------------|---------------|------------|------------|---------------|
| AgreementScreen | âŒ Shown | âœ… Skipped | âœ… Skipped | âœ… Skipped |
| OnboardingScreen | âŒ Shown | âœ… Skipped | âœ… Skipped | âœ… Skipped |
| SetupGuide Steps | All shown | Some shown | None shown | None shown |
| Cloud Sync Modal | Auto-shown | Auto-shown | Skipped (offline) | Skipped (paired) |
| Local Import | After setup | âœ… Runs | âœ… Runs | âœ… Runs |
| Find Recordings | âŒ No permission | âŒ No permission | âœ… Runs | âœ… Runs |
| Fetch Server Config | N/A | N/A | âŒ Skipped | âœ… Runs |
| Pull Server Updates | N/A | N/A | âŒ Skipped | âœ… Runs |
| Push New Calls | N/A | N/A | âŒ Skipped | âœ… Runs |
| Push Updates | N/A | N/A | âŒ Skipped | âœ… Runs |
| Recording Upload | N/A | N/A | âŒ Skipped | âœ… Runs |
| Sync Status Bar | Hidden | Hidden | Hidden | âœ… Visible |

---

## ğŸ“Š Decision Check Points Summary

```
START
  â”‚
  â”œâ”€â–¶ isAgreementAccepted?
  â”‚     â”œâ”€â”€ NO  â†’ AgreementScreen
  â”‚     â””â”€â”€ YES â”€â”
  â”‚              â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â–¶ isOnboardingCompleted?
  â”‚     â”œâ”€â”€ NO  â†’ OnboardingScreen (8 steps)
  â”‚     â””â”€â”€ YES â”€â”
  â”‚              â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â–¶ hasAllPermissions AND allConfigDone?
  â”‚     â”œâ”€â”€ NO  â†’ SetupGuide (show remaining steps)
  â”‚     â””â”€â”€ YES â”€â”
  â”‚              â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â–¶ pairingCode.isEmpty() AND !isSessionOnboardingDismissed?
  â”‚     â”œâ”€â”€ YES â†’ Show CloudSyncModal
  â”‚     â””â”€â”€ NO  â”€â”
  â”‚              â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â–¶ [Always] syncFromSystemCallLog()
  â”‚     â”œâ”€â”€ Import calls from Android
  â”‚     â”œâ”€â”€ Find recordings (if storage permission)
  â”‚     â””â”€â”€ Update person data
  â”‚
  â”œâ”€â–¶ organisationId.isNotEmpty() AND userId.isNotEmpty()?
  â”‚     â”œâ”€â”€ NO  â†’ LOCAL MODE (stop here)
  â”‚     â””â”€â”€ YES â”€â”
  â”‚              â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â–¶ callTrackEnabled?
  â”‚     â”œâ”€â”€ NO  â†’ Fetch config only, skip sync
  â”‚     â””â”€â”€ YES â”€â”
  â”‚              â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â–¶ [SERVER SYNC]
  â”‚     â”œâ”€â”€ Fetch config from server
  â”‚     â”œâ”€â”€ Pull updates since lastSyncTime
  â”‚     â”œâ”€â”€ Push new calls (batched)
  â”‚     â”œâ”€â”€ Push metadata updates
  â”‚     â”œâ”€â”€ Push person updates
  â”‚     â””â”€â”€ Trigger recording upload if needed
  â”‚
  â””â”€â–¶ UPDATE lastSyncTime
```
